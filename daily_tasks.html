{% extends "base.html" %}

{% block title %}المهام اليومية - {{ account.email }}{% endblock %}

{% block content %}
<div class="container py-4">
    <div class="d-flex justify-content-between align-items-center mb-4">
        <h2>المهام اليومية</h2>
        <a href="{{ url_for('dashboard') }}" class="btn btn-outline-secondary">
            <i class="fas fa-arrow-right me-1"></i> العودة للرئيسية
        </a>
    </div>

    <div class="card">
        <div class="card-header bg-primary text-white">
            <h5 class="mb-0">الحساب: {{ account.email }}</h5>
        </div>
        <div class="card-body">
            <div class="alert alert-info">
                <h5>تعليمات:</h5>
                <p class="mb-0">حدد الصناديق التي قمت باستلامها اليوم ثم اضغط على زر الحفظ.</p>
            </div>
            
            <form method="POST" action="{{ url_for('daily_tasks', account_id=account.id) }}">
                <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
                <div class="row">
                    {% set task_names = {
                        '30': 'صندوق 30',
                        '70': 'صندوق 70',
                        '120': 'صندوق 120',
                        '180': 'صندوق 180',
                        '260': 'صندوق 260',
                        '340': 'صندوق 340',
                        '420': 'صندوق 420',
                        '500': 'صندوق 500'
                    } %}
                    
                    {% for value, name in task_names.items() %}
                        <div class="col-md-6 col-lg-4 mb-3">
                            <div class="form-check form-switch">
                                <input class="form-check-input" type="checkbox" 
                                       id="task-{{ value }}" name="tasks" 
                                       value="{{ value }}" 
                                       {% if account.tasks and account.tasks.get(value) %}checked{% endif %}>
                                <label class="form-check-label" for="task-{{ value }}">
                                    <h5 class="mb-0">{{ name }}</h5>
                                </label>
                            </div>
                        </div>
                    {% endfor %}
                </div>
                
                <div class="mt-4">
                    <button type="submit" class="btn btn-primary">
                        <i class="fas fa-save me-1"></i> حفظ المهام
                    </button>
                    <a href="{{ url_for('dashboard') }}" class="btn btn-outline-secondary">
                        <i class="fas fa-times me-1"></i> إلغاء
                    </a>
                </div>
            </form>
        </div>
    </div>
    
    <div class="card mt-4">
        <div class="card-header bg-info text-white">
            <h5 class="mb-0">معلومات الحساب</h5>
        </div>
        <div class="card-body">
            <div class="row">
                <div class="col-md-6">
                    <p><strong>البريد الإلكتروني:</strong> {{ account.email }}</p>
                    <p><strong>معرف IGG:</strong> {{ account.igg_id }}</p>
                </div>
                <div class="col-md-6">
                    <p><strong>رقم الهاتف:</strong> {{ account.phone }}</p>
                    <p><strong>الحالة:</strong> 
                        <span class="badge bg-{{ 'success' if account.status == 'active' else 'secondary' }}">
                            {{ 'نشط' if account.status == 'active' else 'غير نشط' }}
                        </span>
                    </p>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script>
    // Add animation to progress bar
    document.addEventListener('DOMContentLoaded', function() {
        const progressBar = document.querySelector('.progress-bar');
        progressBar.style.transition = 'width 1s ease-in-out';
    });
</script>
{% endblock %}
